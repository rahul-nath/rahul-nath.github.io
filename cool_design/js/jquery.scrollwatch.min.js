/* jquery.scrollwatch vx.x.x | (c) n33 | n33.co @n33co | MIT */
(function(e){function g(e,r,i){return typeof e=="string"&&(e.slice(-1)=="%"?e=parseInt(e[t](0,e[n]-1))/100*r:e.slice(-2)=="vh"?e=parseInt(e[t](0,e[n]-2))/100*i:e.slice(-2)=="px"&&(e=parseInt(e[t](0,e[n]-2)))),e}var t="substring",n="length",r="scroll",i="scrollwatch",s="data",o="scrollwatch-id",u="default",a=null,f="scrollwatch-active",l="apply",c="_scrollwatch",h="initialize",p="removeData",d=e(window),v=1,m={};d.on(r,function(){var t=d.scrollTop();e.map(m,function(e){e(t)})}).on("load",function(){d.trigger(r)}),jQuery.fn[i]=function(t){var p,y,b,w,E,S,x;if(this[n]==0)return e(this);if(this[n]>1){for(p=0;p<this[n];p++)e(this[p])[i](t);return e(this)}y=e(this);if(y[s](o))return y;b=jQuery.extend({top:0,bottom:0,mode:u,enter:a,leave:a,initialize:a,terminate:a,scroll:a},t),w=this,E=v++,y[s](o,E)[s](f,!1);switch(b.mode){case"top":x=function(e,t,n,r,i){return e>=r&&e<=i};break;case"bottom":x=function(e,t,n,r,i){return n>=r&&n<=i};break;case"middle":x=function(e,t,n,r,i){return t>=r&&t<=i};break;case"top-only":x=function(e,t,n,r){return e<=r&&r<=n};break;case"bottom-only":x=function(e,t,n,r,i){return n>=i&&i>=e};break;default:case u:x=function(e,t,n,r,i){return n>=r&&e<=i}}return S=function(e){var t=y[s](f),n=!1,i=y.offset(),o=d.height(),u=e+o/2,a=e+o,c=y.outerHeight(),h=i.top+g(b.top,c,o),p=i.top+c-g(b.bottom,c,o);n=x(e,u,a,h,p),n!=t&&(y[s](f,n),n?b.enter&&b.enter[l](w):b.leave&&b.leave[l](w)),b[r]&&b[r][l](w,[(u-h)/(p-h)])},m[E]=S,this[c]=b,b[h]&&b[h][l](this),y},jQuery.fn.unscrollwatch=function(){var t,r,u;if(this[n]==0)return e(this);if(this[n]>1){for(t=0;t<this[n];t++)e(this[t])[i]();return e(this)}return r=e(this),u=r[s](o),u?(r[p](o)[p](f),delete m[u],this[c].terminate&&this[c].terminate[l](this),delete this[c],r):r}})(jQuery);